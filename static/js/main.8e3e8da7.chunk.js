(window.webpackJsonpcontactlist=window.webpackJsonpcontactlist||[]).push([[0],{11:function(e,t,a){},14:function(e,t,a){e.exports=a(23)},23:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(12),l=a(3),o=a(5),i=a(2),s=a.n(i),m=a(7),d=a(6),u=(a(10),a(11),a(13)),p=(a(20),function(e){var t=e.contact,a=e.deleteClickHandler,n="exampleModal"+t.id;return c.a.createElement("div",{className:"modal fade",id:n,tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},c.a.createElement("div",{className:"modal-dialog",role:"document"},c.a.createElement("div",{className:"modal-content"},c.a.createElement("div",{className:"modal-header"},c.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Delete confirmation"),c.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),c.a.createElement("div",{className:"modal-body"},"Are you sure want to delete ",c.a.createElement("b",null,t.name)," from contact list?"),c.a.createElement("div",{className:"modal-footer"},c.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"No,close"),c.a.createElement("button",{type:"button",data:t.id,onClick:a,"data-dismiss":"modal",className:"btn btn-danger"},"Yes,delete")))))}),f=a(4);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E=function(e){var t=e.deleteClickHandler,a=Object(u.a)(e,["deleteClickHandler"]),r=Object(n.useState)({isEditing:!1,contact:a.contact}),l=Object(d.a)(r,2),o=l[0],i=l[1],b=function(){var e=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://testtask123123.dx.am/src/api/edit.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e){if(o.isEditing){var t=y({},o.contact);t.name=document.getElementById("name-input"+a.contact.id).value,t.phone=document.getElementById("phone-input"+a.contact.id).value,t.info=document.getElementById("info-input"+a.contact.id).value,""!==t.name&&""!==t.phone&&(i(y({},o,{contact:t,isEditing:!o.isEditing})),b(t))}else i(y({},o,{isEditing:!o.isEditing}))},g=Object(f.b)(o.isEditing,null,{from:{opacity:0,position:"absolute"},enter:{opacity:1,position:"relative"},leave:{position:"absolute",opacity:0}}),v=o.contact;return g.map((function(e){var a=e.item,n=e.key,r=e.props;return c.a.createElement("div",{key:n,className:" mr-4 contact-wrapper position-relative"},a?c.a.createElement(f.a.div,{style:r,className:" pt-2 px-4 my-3 mr-5 d-flex flex-column contact-wrapper justify-content-center align-items-between main-wrapper w-100"},c.a.createElement("div",{className:"d-flex flex-row  justify-content-between "},c.a.createElement("div",{className:"image-wrapper"},c.a.createElement("img",{alt:"contact avatar",src:"/images/".concat(v.imgurl)})),c.a.createElement("div",{className:"contactInfo  d-flex align-items-center"},c.a.createElement("div",{className:"d-flex  flex-column"},c.a.createElement("div",{className:"text-center name"},c.a.createElement("input",{type:"text",id:"name-input"+v.id,required:!0,defaultValue:v.name})),c.a.createElement("div",{className:"text-center phone"},c.a.createElement("input",{type:"text",id:"phone-input"+v.id,required:!0,defaultValue:v.phone})))),c.a.createElement("div",{className:"actions d-flex pr-3 align-items-center justify-content-center"},c.a.createElement("button",{className:"mr-3 btn btn-success",index:1,onClick:E},"Save"))),c.a.createElement("div",{className:"additionalInfo d-flex  justify-content-center align-items-between"},c.a.createElement("textarea",{type:"text",id:"info-input"+v.id,placeholder:"Info",defaultValue:v.info}))):c.a.createElement(f.a.div,{style:r,className:"pt-2 px-4 my-3 mr-5 contact-wrapper  d-flex flex-column justify-content-center align-items-between main-wrapper  w-100"},c.a.createElement("div",{className:"d-flex flex-row flex-wrap justify-content-between "},c.a.createElement("div",{className:"image-wrapper"},c.a.createElement("img",{alt:"contact avatar",src:"/images/".concat(v.imgurl)})),c.a.createElement("div",{className:"contactInfo  d-flex align-items-center"},c.a.createElement("div",{className:"d-flex  flex-column"},c.a.createElement("div",{className:"text-center name"},v.name),c.a.createElement("div",{className:"text-center phone"},v.phone))),c.a.createElement("div",{className:"actions d-flex pr-3 align-items-center justify-content-center"},c.a.createElement("button",{className:"mr-3 btn btn-info",onClick:function(e){return E()}},"Edit"),c.a.createElement("button",{"data-target":"#exampleModal"+v.id,"data-toggle":"modal",className:"btn btn-danger",type:"button"},"Delete"),c.a.createElement(p,{deleteClickHandler:t,contact:v}))),c.a.createElement("div",{className:"additionalInfo pt-3 pb-4"},v.info)))}))},g=function(e){var t=e.addClickHandler,a=Object(n.useState)(!1),r=Object(d.a)(a,2),l=r[0],o=r[1],i=Object(f.b)(l,null,{config:{duration:500},from:{height:0,opacity:0},enter:{height:300,opacity:1},leave:{height:0,opacity:0}});return c.a.createElement("div",{id:"header-add",className:"d-flex flex-column"},c.a.createElement("div",{className:"d-flex justify-content-start"},c.a.createElement("button",{className:"btn btn-primary",onClick:function(){o((function(e){return!e}))}},"Add new contact"," ")),i.map((function(e){var a=e.item,n=e.key,r=e.props;return a&&c.a.createElement(f.a.div,{style:r,key:n,className:"d-flex flex-column head-wrapper justify-content-center align-items-center"},c.a.createElement("div",{className:"form-group d-flex align-items-center"},c.a.createElement("label",{className:"pr-3"},"Name",c.a.createElement("span",{className:"text-danger"},"\xa0*")),c.a.createElement("input",{type:"text",id:"add-name",className:"form-control",required:!0,placeholder:"John Doe"})),c.a.createElement("div",{className:"form-group d-flex align-items-center"},c.a.createElement("label",{className:"pr-3"},"Phone",c.a.createElement("span",{className:"text-danger"},"\xa0*")),c.a.createElement("input",{type:"text",id:"add-phone",className:"form-control",required:!0,placeholder:"8-800-555-35-35"})),c.a.createElement("div",{className:"form-group d-flex align-items-center"},c.a.createElement("textarea",{type:"text",id:"add-info",className:"form-control",size:"40",placeholder:"Additional information"})),c.a.createElement("div",{className:"form-group d-flex align-items-center"},c.a.createElement("input",{type:"file",id:"add-img",className:"",accept:"image/*",placeholder:"image"})),c.a.createElement("button",{className:"btn btn-success",onClick:t},"Add contact"))})))},v=a(8),h=a.n(v),x="https://contact-list-api12.herokuapp.com/";function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var j=function(e){var t=Object(n.useState)({externalData:null,addNew:!1}),a=Object(d.a)(t,2),r=a[0],l=a[1];console.log(x);var i=function(){var e=Object(m.a)(s.a.mark((function e(){var t,a,n,c,r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("add-name").value,a=document.getElementById("add-phone").value,n=document.getElementById("add-info").value,c=document.getElementById("add-img"),t&&a?(c&&((r=new FormData).append("img",c.files[0]),h.a.ajax({url:"".concat(x,"/uploader.php"),method:"POST",data:r,contentType:!1,cache:!1,processData:!1,success:function(){console.log("successfully")}})),l={name:t,phone:a,info:n,imgurl:c.files[0]?c.files[0].name:""},fetch("".concat(x,"/add.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(){document.getElementById("add-name").value="",document.getElementById("add-phone").value="",document.getElementById("add-info").value="",document.getElementById("add-img").value=null})).then((function(){return f()}))):alert("Name and phone are required");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(e){var t=Object(o.a)(r.externalData),a=e.target.getAttribute("data");for(var n in t)t[n].id===a&&(t[n].name="");l((function(e){return O({},e,{externalData:t})})),p(a)},p=function(){var e=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("".concat(x,"/delete.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("fetching"),t="".concat(x,"/demo.php"),fetch(t,{method:"GET"}).then((function(e){return e.json()})).then((function(e){l((function(t){return O({},t,{externalData:e.sort((function(e,t){return e.id-t.id})).reverse()})}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f()}),[]),c.a.createElement("div",null,c.a.createElement("div",{className:"jumbotron "},c.a.createElement(g,{addClickHandler:i})),c.a.createElement("ul",{className:"d-flex flex-row align-items-center justify-content-center flex-wrap"},r.externalData&&r.externalData.map((function(e){return e.name&&c.a.createElement("li",{key:e.id},c.a.createElement(E,{deleteClickHandler:u,contact:e})," ")}))))};Object(r.render)(c.a.createElement(j,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.8e3e8da7.chunk.js.map